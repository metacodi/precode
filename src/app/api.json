{


  "complete_direcciones": {
    "actions": "*",
    "access": "public"
  },
  "complete_ubicaciones": {
    "actions": "*",
    "access": "public"
  },
  "complete_ubicaciones_usuarios": {
    "actions": "*",
    "access": "public"
  },



  "lang": {
    "actions": "GET",
    "access": "public"
  },
  "localize": {
    "actions": "GET",
    "permissions": "*"
  },
  "getLocalize": {
    "actions": [
      "GET",
      { "name": "export", "method": "POST" },
      { "name": "import", "method": "POST" }
    ],
    "permissions": [
      {
        "roles": ["Usuario", "Conductor"],
        "actions": ["get"]
      },
      {
        "roles": "Admin",
        "actions": "*"
      }
    ]
  },

  "roles": {
    "fields": { "forbidden": ["permissions"], "hidden": ["permissions"] },
    "actions": "GET",
    "permissions": "*"
  },

  "login": {
    "actions": ["GET", "POST"],
    "access": "public",
    "fields": {
      "permitted": ["email", "password", "idLang", "token"],
      "required": [["email", "password"], ["token"]]
    }
  },

  "register": {
    "tableName": "users",
    "fields": { "hidden": ["deleted"] },
    "actions": "POST",
    "access": "public"
  },

  "validateByPin": {
    "tableName": "users",
    "fields": { "hidden": ["deleted"] },
    "actions": "POST",
    "access": "public"
  },

  "users": {
    "fields": { "hidden": ["password", "pin"] },
    "actions": "*",
    "permissions": [
      {
        "roles": ["Usuario", "Conductor"],
        "actions": ["get", "put"],
        "fields": { "hidden": ["created", "deleted", "validated", "lat", "lng"] },
        "where": "users.idreg = {{idUser}}"
      },
      {
        "roles": "Admin",
        "actions": "*"
      }
    ]
  },

  "devices": {
    "actions": "GET",
    "fields": { "hidden": ["ip", "token"] },
    "permissions": "*"
  },

  "notified": {
    "actions": ["GET", "PUT"],
    "permissions": "*"
  },
  "notifications": {
    "actions": ["GET"],
    "permissions": "*"
  },
  "notificationTypes": {
    "actions": ["GET"],
    "permissions": "*"
  },
  "notificationActions": {
    "actions": ["GET"],
    "permissions": "*"
  },





  "ofertas": "*",

  "google_maps": {
    "name": { "singular": "google_maps", "plural": "google_maps" },
    "actions": { "name": "google_maps", "method": "POST" },
    "permissions": {
      "roles": "*",
      "actions": "*"
    }
  },

  "servicios": {
    "actions": ["*",
      { "name": "confirmar", "method": "GET"},
      { "name": "asignar", "method": "PUT", "required": ["fecha_asignacion", "idtaxista"] },
      { "name": "aceptar", "method": "GET"},
      { "name": "pagar", "method": "POST"},
      { "name": "archivar", "method": "POST", "required": ["ids"] },
      { "name": "pagarConductor", "method": "POST", "required": ["idPayment"] },
      { "name": "pagarPorApp", "method": "POST", "required": ["idPayment"] }
    ],
    "permissions": [
      {
        "roles": "Usuario",
        "actions": ["crud", "archivar", "pagarPorApp"],
        "where": "servicios.idUser = {{idUser}}"
      },
      {
        "roles": "Conductor",
        "actions": ["get", "post", "put", "archivar", "aceptar", "pagarConductor" ]
      },
      {
        "roles": "Admin",
        "actions": "*"
      }
    ]
  },

  "facturas": {
    "actions": ["*",
      { "name": "calcular.numero", "method": "POST", "inherit": "facturas.post" },
      { "name": "calcular.vencimiento", "method": "POST", "inherit": ["post", "put"] },
      { "name": "edit.emision" }, "edit.vencimiento", ["edit.iva", "edit.irpf"],
      "print",
      { "name": "print.factura", "method": "POST" },
      { "name": "print.factura.excel", "method": "POST" },
      { "name": "print.list", "method": "POST" },
      { "name": "print.ivaTrimetral", "method": "POST" },
      { "name": "print.ivaAnual", "method": "POST" },
      { "name": "print.irpf", "method": "POST" },
      { "name": "generar", "method": "POST" }
    ],
    "permissions": [
      {
        "role": "Usuario",
        "action": ["get", "put", "print.list", "edit.emision"],
        "where": "facturas.idEmpresa IN (SELECT idEmpresa FROM `clientes` WHERE idUser = {{idUser}})"
      },
      {
        "role": "Conductor",
        "action": ["get", "post", "put", "print.*", "edit.emision"],
        "where": "facturas.idEmpresa IN (SELECT idEmpresa FROM `proveedores` WHERE idUser = {{idUser}})"
      },
      {
        "role": "Admin",
        "action": "*"
      }
    ]
  },

  "test": {

  }

}
