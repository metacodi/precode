<ion-header>

  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button [text]="'buttons.back' | translate"></ion-back-button>
    </ion-buttons>
    <ion-title>{{headerText}}</ion-title>
  </ion-toolbar>

</ion-header>
<ion-content>
  
  <form [formGroup]="frm" (ngSubmit)="saveRow()">

    <ion-card class="detail no-shadow">

      <ion-grid>
        <ion-row>
          <ion-col>

            <ion-item>
              <ion-icon *ngIf="row?.info?.operatingSystem" [name]="service.deviceIcon(row?.info?.operatingSystem)" slot="start"></ion-icon>
              <ion-label class="ion-text-wrap" style="font-size: 17px !important;">
                <ion-text>{{row.description}}</ion-text>
              </ion-label>
            </ion-item>

          </ion-col>
          <ion-col size="auto" hasPermission="devices.multilogin">

            <ion-button [disabled]="!frm.pristine" (click)="cerrarSesion()" *ngIf="row.apiToken" size="small" type="button" color="warning" expand="block">{{'device.close_session' | translate | uppercase }}</ion-button>
            <ion-label *ngIf="!row.apiToken">Sesi√≥n cerrada</ion-label>

          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">

            <h5>{{'device.last_connection' | translate}}</h5>
            <ion-text>{{row?.updated | localize}}</ion-text>

          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">

            <h5>{{'device.session_expiration' | translate}}</h5>
            <ion-text>{{row?.apiExpiration | localize}}</ion-text>

          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">

            <h5>{{'device.operatingSystem' | translate}}</h5>
            <ion-text>{{row.info?.operatingSystem | uppercase}}, {{row.info?.osVersion}}</ion-text>

          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">

            <h5>{{'device.last_ip' | translate}}</h5>
            <ion-text>{{row.ip}}</ion-text>

          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12"><h3>{{'Opciones del dispositivo' | translate}}</h3></ion-col>
          <ion-col>

            <ion-list>

              <ng-container *ngFor="let setting of settings">
                <ion-item (click)="goToDeviceSettings(setting)" detail="true" class="ion-activatable">
                  <ion-spinner *ngIf="preloading === setting" name="lines-small" slot="start"></ion-spinner>
                  <ion-icon *ngIf="preloading !== setting" name="lock-closed" slot="start"></ion-icon>
                  <ion-label>{{'deviceSettings.' + setting | translate}}</ion-label>
                </ion-item>    
              </ng-container>

            </ion-list>

          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-grid class="buttons">
        <ion-row>
          <ion-col>

            <ion-button type="button" (click)="deleteRow()" color="danger" expand="block"><ion-icon slot="start" name="trash"></ion-icon>{{'buttons.delete' | translate | uppercase }}</ion-button>

          </ion-col>
        </ion-row>
      </ion-grid>

    </ion-card>

  
  </form>

</ion-content>
