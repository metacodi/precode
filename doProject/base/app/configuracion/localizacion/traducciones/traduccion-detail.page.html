<ion-header>

<ion-toolbar>
  <ion-buttons slot="start">
    <ion-back-button [text]="'buttons.back' | translate"></ion-back-button>
  </ion-buttons>
  <ion-title>{{headerText}}</ion-title>
</ion-toolbar>

</ion-header>
<ion-content>

  <form [formGroup]="frm" (ngSubmit)="saveRow()">

    <ion-card class="detail no-shadow">

      <ion-grid>
        <ion-row>
          <ion-col>

            <ion-item>
              <ion-label position="floating">id: {{row.idreg}}</ion-label>
              
            </ion-item>

          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>

            <ion-item>
              <ion-label position="floating">{{'traducciones.path' | translate}}</ion-label>
              <ion-input #focusRefPath formControlName="path" type="text" placeholder="{{'traducciones.path' | translate}}" spellcheck="false"></ion-input>
            </ion-item>

          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>

            <ion-item>
              <ion-label position="floating">{{'traducciones.key' | translate}} <ion-text color="danger">*</ion-text></ion-label>
              <ion-input formControlName="key" type="text" placeholder="{{'traducciones.key' | translate}} *" spellcheck="false" required></ion-input>
            </ion-item>

          </ion-col>
        </ion-row>

        <ion-row formArrayName="localize_lang" *ngFor="let t of localize_lang.controls; let i = index;">
          <ion-col>

            <ion-item [formGroupName]="i">
              <img [src]="flag(t.controls.idLang.value)" />
              <ion-input formControlName="description" type="text" placeholder="{{'traducciones.description' | translate}}" spellcheck="false" [attr.required]="t.controls.idreg.value !== 'new'"></ion-input>
            </ion-item>

          </ion-col>
        </ion-row>
      </ion-grid>


      <div class="error ion-text-start">
        <p *ngIf="initialized && (!isNew || isNew && (getter('key').touched || getter('key').dirty)) && getter('key').errors?.required">{{'traduccion.key_required' | translate}}</p>
        <ng-container *ngFor="let t of localize_lang.controls; let i = index;">
          <p *ngIf="initialized && (t.controls.description.touched || t.controls.description.dirty) && t.controls.description.errors?.required">{{'t.description_required' | translate}}</p>
        </ng-container>
      </div>

      <ion-grid class="buttons">
        <ion-row>
          <ion-col>

            <ion-button type="button" (click)="deleteRow()" [color]="isNew ? 'secondary' : 'danger'" expand="block"><ion-icon *ngIf="!isNew" slot="start" name="trash"></ion-icon>{{(isNew ? 'buttons.cancel' : 'buttons.delete') | translate | uppercase }}</ion-button>

          </ion-col>
          <ion-col>

            <ion-button type="submit" [disabled]="!initialized || frm.invalid || frm.pristine" [color]="frm.valid ? 'primary' : 'secondary'" expand="block">{{'buttons.save' | translate | uppercase }}</ion-button>

          </ion-col>
          <ion-col>

            <ion-button (click)="saveCopy(row)" [disabled]="!initialized || frm.invalid || frm.pristine" [color]="frm.valid ? 'tertiary' : 'secondary'" expand="block">{{'buttons.save_copy' | translate | uppercase }}</ion-button>

          </ion-col>

        </ion-row>
      </ion-grid>
      <ion-grid class="buttons">
        <ion-row>
          <ion-col style="font-size: 16px;" class="ion-text-center">

            {{row?.path}}.{{row?.key}}

          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>

            <ion-button (click)="copyToClipBoard()" expand="block">{{'traduciones.copyClipBoard' | translate | uppercase }}</ion-button>

          </ion-col>
          <ion-col>

            <ion-button (click)="copyToClipBoard(true)" expand="block">{{'traduciones.copyClipBoardTranslate' | translate | uppercase }}</ion-button>

          </ion-col>
        </ion-row>
      </ion-grid>

      

    </ion-card>
  </form>

</ion-content>
